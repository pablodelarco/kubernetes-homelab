apiVersion: v1
kind: ConfigMap
metadata:
  name: zigbee2mqtt-config
  namespace: zigbee2mqtt
data:
  configuration.yaml: |
    # Home Assistant integration (MQTT discovery)
    homeassistant: true
    
    # Allow new devices to join
    permit_join: true
    
    # MQTT settings - Connect to Mosquitto
    mqtt:
      base_topic: zigbee2mqtt
      server: mqtt://mosquitto.mosquitto.svc.cluster.local:1883
    
    # Serial settings - Will auto-detect when ZBT-1 is plugged in
    serial:
      port: /dev/ttyACM0
      adapter: ezsp
    
    # Frontend (Web UI)
    frontend:
      port: 8080
      host: 0.0.0.0
    
    # Advanced settings
    advanced:
      log_level: info
      network_key: GENERATE
      pan_id: GENERATE
      channel: 11

