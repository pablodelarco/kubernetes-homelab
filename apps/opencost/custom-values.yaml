# Service configuration - ClusterIP (access via Tailscale Funnel)
service:
  enabled: true
  type: ClusterIP
  annotations: {}
  labels: {}

opencost:
  prometheus:
    internal:
      namespaceName: monitoring
      serviceName: monitoring-kube-prometheus-prometheus
      port: 9090

  dataRetention:
    dailyResolutionDays: 30

  exporter:
    defaultClusterId: homelab-cluster
    replicas: 1
    resources:
      requests:
        cpu: "10m"
        memory: "55Mi"
      limits:
        memory: "1Gi"
    persistence:
      enabled: true
      storageClass: "longhorn"
      accessMode: ReadWriteOnce
      size: 5Gi
    affinity:
      nodeAffinity:
        requiredDuringSchedulingIgnoredDuringExecution:
          nodeSelectorTerms:
            - matchExpressions:
                - key: kubernetes.io/hostname
                  operator: In
                  values:
                    - beelink

  metrics:
    kubeStateMetrics:
      emitKsmV1Metrics: false
      emitKsmV1MetricsOnly: false
    serviceMonitor:
      enabled: true
      additionalLabels:
        release: monitoring

  ui:
    enabled: true
    ingress:
      # Disabled - using Cilium Gateway API instead
      enabled: false

