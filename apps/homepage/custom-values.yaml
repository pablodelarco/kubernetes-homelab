config:
  bookmarks:
    - Developer:
        - GitHub:
            - abbr: GH
              href: https://github.com/pablodelarco/kubernetes-homelab
        - Kubernetes:
            - abbr: K8s
              href: https://kubernetes.io/docs/
    - Media:
        - Jellyfin:
            - abbr: JF
              href: https://jellyfin.org/docs/
        - Radarr:
            - abbr: RD
              href: https://wiki.servarr.com/radarr
    - Monitoring:
        - Grafana:
            - abbr: GR
              href: https://grafana.com/grafana/dashboards/
        - Prometheus:
            - abbr: PM
              href: https://prometheus.io/docs/

  services:
    - Infra:
        - Home Assistant:
            icon: homeassistant.png
            href: https://home-assistant.tabby-carp.ts.net/
            description: Home automation platform
            ping: https://home-assistant.tabby-carp.ts.net
            widget:
              type: homeassistant
              url: https://home-assistant.tabby-carp.ts.net/
              key: "{{HOMEPAGE_VAR_HOMEASSISTANT_TOKEN}}"

    - CI/CD:
        - ArgoCD:
            icon: argocd.png
            href: https://argocd.tabby-carp.ts.net/
            description: GitOps continuous delivery

    - Storage:
        - MinIO:
            icon: minio.png
            href: https://minio-console.tabby-carp.ts.net/
            description: S3-compatible object storage
        - Longhorn:
            icon: longhorn.png
            href: https://longhorn.tabby-carp.ts.net/
            description: Distributed block storage
            widget:
              type: longhorn
              url: https://longhorn.tabby-carp.ts.net/

    - Networking:
        - Traefik:
            icon: traefik.png
            href: http://beelink:9000/
            description: Reverse proxy & load balancer

    - Monitoring:
        - Uptime Kuma:
            icon: uptime-kuma.png
            href: https://uptime-kuma.tabby-carp.ts.net/
            description: Uptime monitoring
            widget:
              type: uptimekuma
              url: https://uptime-kuma.tabby-carp.ts.net/
              slug: homelab
        - Grafana:
            icon: grafana.png
            href: https://grafana.tabby-carp.ts.net/
            description: Metrics & dashboards
            widget:
              type: grafana
              url: https://grafana.tabby-carp.ts.net/
              username: "{{HOMEPAGE_VAR_GRAFANA_USER}}"
              password: "{{HOMEPAGE_VAR_GRAFANA_PASSWORD}}"
        - Prometheus:
            icon: prometheus.png
            href: http://beelink:9090/
            description: Metrics collection

    - Media:
        - Jellyfin:
            icon: jellyfin.png
            href: https://jellyfin.tabby-carp.ts.net/
            description: Media streaming server
            widget:
              type: jellyfin
              url: https://jellyfin.tabby-carp.ts.net/
              key:
                valueFrom:
                  secretKeyRef:
                    name: jellyfin-secret
                    key: JELLYFIN_API_KEY
              enableBlocks: true
              enableNowPlaying: true
              enableUser: false
              showEpisodeNumber: true
              expandOneStreamToTwoRows: false
        - Radarr:
            icon: radarr.png
            href: https://radarr.tabby-carp.ts.net/
            description: Movie collection manager
            widget:
              type: radarr
              url: https://radarr.tabby-carp.ts.net/
              key: "{{HOMEPAGE_VAR_RADARR_API_KEY}}"
        - Jackett:
            icon: jackett.png
            href: https://jackett.tabby-carp.ts.net/
            description: Indexer proxy
        - qBittorrent:
            icon: qbittorrent.png
            href: https://qbitt.tabby-carp.ts.net/
            description: Torrent client
            widget:
              type: qbittorrent
              url: https://qbitt.tabby-carp.ts.net/

  widgets:
    - search:
        provider: google
        target: _blank
    - datetime:
        text_size: xl
        format:
          dateStyle: long
          timeStyle: short
          hour12: false
    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: "Beelink Cluster"
        nodes:
          show: true
          cpu: true
          memory: true
          showLabel: true
    - resources:
        backend: kubernetes
        expanded: true
        cpu: true
        memory: true

  # Kubernetes integration settings
  kubernetes:
    mode: cluster

  # General settings
  settings:
    title: "Pablo's Homelab"
    favicon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/kubernetes.png
    theme: dark
    color: slate
    headerStyle: boxed
    hideVersion: true
    layout:
      Infra:
        style: row
        columns: 2
      CI/CD:
        style: row
        columns: 2
      Storage:
        style: row
        columns: 2
      Networking:
        style: row
        columns: 2
      Monitoring:
        style: row
        columns: 3
      Media:
        style: row
        columns: 4

# Environment variables for API keys and credentials
# These can be referenced in the config using {{HOMEPAGE_VAR_NAME}}
env:
  # Grafana credentials (update these with your actual credentials)
  - name: HOMEPAGE_VAR_GRAFANA_USER
    value: "admin"
  - name: HOMEPAGE_VAR_GRAFANA_PASSWORD
    value: "prom-operator"  # Change this to your actual Grafana password

  # Radarr API key (you'll need to get this from Radarr settings)
  - name: HOMEPAGE_VAR_RADARR_API_KEY
    value: "YOUR_RADARR_API_KEY"  # Replace with actual API key from Radarr

  # Home Assistant token (you'll need to create a long-lived access token)
  - name: HOMEPAGE_VAR_HOMEASSISTANT_TOKEN
    value: "YOUR_HOMEASSISTANT_TOKEN"  # Replace with actual token

# The service account is necessary to allow discovery of other services
serviceAccount:
  create: true
  name: homepage

# This enables the service account to access the necessary resources
enableRbac: true

ingress:
  main:
    enabled: true
    annotations:
      tailscale.com/funnel: "true"
      gethomepage.dev/enabled: "true"
    ingressClassName: tailscale
    hosts:
      - host: homepage
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - homepage

persistence:
  logs:
    enabled: true
    type: pvc
    mountPath: /app/config/logs
    accessMode: ReadWriteOnce # Specify the required access mode
    storageClass: "longhorn" # Specify your storage class
    size: 5Gi


controller:
  annotations:
    configmap-checksum: '{{ include (print $.Template.BasePath "/configmap.yaml") . | sha256sum }}'





