config:
  bookmarks:
    - Developer:
        - GitHub:
            - abbr: GH
              href: https://github.com/pablodelarco/kubernetes-homelab
        - Kubernetes:
            - abbr: K8s
              href: https://kubernetes.io/docs/
    - Media:
        - Jellyfin:
            - abbr: JF
              href: https://jellyfin.org/docs/
        - Radarr:
            - abbr: RD
              href: https://wiki.servarr.com/radarr
    - Monitoring:
        - Grafana:
            - abbr: GR
              href: https://grafana.com/grafana/dashboards/
        - Prometheus:
            - abbr: PM
              href: https://prometheus.io/docs/

  services:
    - Infra:
        - Home Assistant:
            icon: homeassistant.png
            href: https://home-assistant.tabby-carp.ts.net/
            description: Home automation platform
            ping: https://home-assistant.tabby-carp.ts.net
            widget:
              type: homeassistant
              url: https://home-assistant.tabby-carp.ts.net/
              key: "{{HOMEPAGE_VAR_HOMEASSISTANT_TOKEN}}"

    - CI/CD:
        - Gitea:
            icon: gitea.png
            href: https://github.com/pablodelarco/kubernetes-homelab
            description: Git repository
        - Jenkins:
            icon: jenkins.png
            href: #
            description: CI/CD automation
        - ArgoCD:
            icon: argocd.png
            href: https://argocd.tabby-carp.ts.net/
            description: GitOps CD
        - Vault:
            icon: vault.png
            href: #
            description: Secrets management

    - Storage:
        - Synology:
            icon: synology.png
            href: http://192.168.1.106:5000/
            description: NAS storage
        - MinIO:
            icon: minio.png
            href: https://minio-console.tabby-carp.ts.net/
            description: S3 object storage
        - Longhorn:
            icon: longhorn.png
            href: https://longhorn.tabby-carp.ts.net/
            description: Block storage
            widget:
              type: longhorn
              url: https://longhorn.tabby-carp.ts.net/
        - PostgreSQL:
            icon: postgresql.png
            href: #
            description: Database

    - Networking:
        - AdGuard:
            icon: adguard-home.png
            href: #
            description: DNS & ad blocking
        - WireGuard:
            icon: wireguard.png
            href: #
            description: VPN
        - Traefik:
            icon: traefik.png
            href: http://beelink:9000/
            description: Reverse proxy
        - Dynamic DNS:
            icon: dns.png
            href: #
            description: DDNS service
        - NPM:
            icon: nginx-proxy-manager.png
            href: #
            description: Proxy manager

    - Monitoring:
        - Uptime Kuma:
            icon: uptime-kuma.png
            href: https://uptime-kuma.tabby-carp.ts.net/
            description: Uptime monitoring
            widget:
              type: uptimekuma
              url: https://uptime-kuma.tabby-carp.ts.net/
              slug: homelab
        - Speedtest:
            icon: speedtest-tracker.png
            href: #
            description: Network speed
        - Grafana:
            icon: grafana.png
            href: https://grafana.tabby-carp.ts.net/
            description: Dashboards
            widget:
              type: grafana
              url: https://grafana.tabby-carp.ts.net/
              username: "{{HOMEPAGE_VAR_GRAFANA_USER}}"
              password: "{{HOMEPAGE_VAR_GRAFANA_PASSWORD}}"
        - Prometheus:
            icon: prometheus.png
            href: http://beelink:9090/
            description: Metrics

    - Media:
        - Jellyfin:
            icon: jellyfin.png
            href: https://jellyfin.tabby-carp.ts.net/
            description: Media server
            widget:
              type: jellyfin
              url: https://jellyfin.tabby-carp.ts.net/
              key:
                valueFrom:
                  secretKeyRef:
                    name: jellyfin-secret
                    key: JELLYFIN_API_KEY
              enableBlocks: true
              enableNowPlaying: true
              enableUser: false
              showEpisodeNumber: true
              expandOneStreamToTwoRows: false
        - Jellyseerr:
            icon: jellyseerr.png
            href: #
            description: Media requests
        - Sonarr:
            icon: sonarr.png
            href: #
            description: TV shows
        - Radarr:
            icon: radarr.png
            href: https://radarr.tabby-carp.ts.net/
            description: Movies
            widget:
              type: radarr
              url: https://radarr.tabby-carp.ts.net/
              key: "{{HOMEPAGE_VAR_RADARR_API_KEY}}"
        - Bazarr:
            icon: bazarr.png
            href: #
            description: Subtitles
        - Prowlarr:
            icon: prowlarr.png
            href: #
            description: Indexer manager
        - qBittorrent:
            icon: qbittorrent.png
            href: https://qbitt.tabby-carp.ts.net/
            description: Torrent client
            widget:
              type: qbittorrent
              url: https://qbitt.tabby-carp.ts.net/
        - Jackett:
            icon: jackett.png
            href: https://jackett.tabby-carp.ts.net/
            description: Indexer proxy

    - Tools:
        - Pinguin:
            icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/pingvin-share.png
            href: #
            description: File sharing
        - IT-Tools:
            icon: it-tools.png
            href: #
            description: Developer tools
        - Stirling PDF:
            icon: stirling-pdf.png
            href: #
            description: PDF tools
        - TwitchPoints:
            icon: twitch.png
            href: #
            description: Twitch automation

    - Extra:
        - Minecraft Stats:
            icon: minecraft.png
            href: #
            description: Server stats
        - Minecraft Map:
            icon: minecraft.png
            href: #
            description: World map
        - Watchtower Bing:
            icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/bing.png
            href: #
            description: Container updates
        - Watchtower TV:
            icon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/plex.png
            href: #
            description: Media updates

  widgets:
    - search:
        provider: google
        target: _blank
    - datetime:
        text_size: xl
        format:
          dateStyle: long
          timeStyle: short
          hour12: false
    - kubernetes:
        cluster:
          show: true
          cpu: true
          memory: true
          showLabel: true
          label: "Beelink Cluster"
        nodes:
          show: true
          cpu: true
          memory: true
          showLabel: true
    - resources:
        backend: kubernetes
        expanded: true
        cpu: true
        memory: true

  # Kubernetes integration settings
  kubernetes:
    mode: cluster

  # General settings
  settings:
    title: "Pablo's Homelab"
    favicon: https://raw.githubusercontent.com/walkxcode/dashboard-icons/main/png/kubernetes.png
    theme: dark
    color: slate
    headerStyle: boxed
    hideVersion: true
    layout:
      Infra:
        style: row
        columns: 1
      CI/CD:
        style: row
        columns: 4
      Storage:
        style: row
        columns: 4
      Networking:
        style: row
        columns: 5
      Monitoring:
        style: row
        columns: 4
      Media:
        style: row
        columns: 8
      Tools:
        style: row
        columns: 4
      Extra:
        style: row
        columns: 4

# Environment variables for API keys and credentials
# These can be referenced in the config using {{HOMEPAGE_VAR_NAME}}
env:
  # Grafana credentials (update these with your actual credentials)
  - name: HOMEPAGE_VAR_GRAFANA_USER
    value: "admin"
  - name: HOMEPAGE_VAR_GRAFANA_PASSWORD
    value: "prom-operator"  # Change this to your actual Grafana password

  # Radarr API key (you'll need to get this from Radarr settings)
  - name: HOMEPAGE_VAR_RADARR_API_KEY
    value: "YOUR_RADARR_API_KEY"  # Replace with actual API key from Radarr

  # Home Assistant token (you'll need to create a long-lived access token)
  - name: HOMEPAGE_VAR_HOMEASSISTANT_TOKEN
    value: "YOUR_HOMEASSISTANT_TOKEN"  # Replace with actual token

# The service account is necessary to allow discovery of other services
serviceAccount:
  create: true
  name: homepage

# This enables the service account to access the necessary resources
enableRbac: true

ingress:
  main:
    enabled: true
    annotations:
      tailscale.com/funnel: "true"
      gethomepage.dev/enabled: "true"
    ingressClassName: tailscale
    hosts:
      - host: homepage
        paths:
          - path: /
            pathType: Prefix
    tls:
      - hosts:
          - homepage

persistence:
  logs:
    enabled: true
    type: pvc
    mountPath: /app/config/logs
    accessMode: ReadWriteOnce # Specify the required access mode
    storageClass: "longhorn" # Specify your storage class
    size: 5Gi
    volumeName: pvc-homepage-restored # Bind to restored volume


controller:
  annotations:
    configmap-checksum: '{{ include (print $.Template.BasePath "/configmap.yaml") . | sha256sum }}'





