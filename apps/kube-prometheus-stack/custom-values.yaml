crds:
  create: true

grafana:
  service:
    type: ClusterIP
    port: 80
  ingress:
    enabled: false  # Disabled - using Cilium Gateway API instead
  persistence:
    enabled: true
    accessModes:
      - ReadWriteOnce
    size: 8Gi
  # Prefer scheduling on worker node to balance cluster load
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          preference:
            matchExpressions:
              - key: kubernetes.io/hostname
                operator: In
                values:
                  - worker

prometheus:
  prometheusSpec:
    remoteWriteDashboards: false
    # Removed affinity to beelink because Longhorn CSI driver is not available on control-plane node
    # Prometheus will run on worker node where Longhorn volumes can be attached
    serverSideApply: true
    retention: 12h
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 5Gi
    resources:
      requests:
        memory: 3Gi
        cpu: 500m
      limits:
        memory: 6Gi
        cpu: 2

alertmanager:
  alertmanagerSpec:
    # Removed affinity to beelink - Longhorn CSI driver not available on control-plane node
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: longhorn
          accessModes:
            - ReadWriteOnce
          resources:
            requests:
              storage: 5Gi

# kubeStateMetrics - using default configuration (no affinity)

prometheusOperator:
  # Removed affinity to beelink - let it run on any available node
  tolerations:
    - key: node-role.kubernetes.io/control-plane
      operator: Exists
      effect: NoSchedule