# HTTPRoutes for Storage services (Garage S3)
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: garage-s3
  namespace: garage
spec:
  parentRefs:
    - name: homelab-gateway
      namespace: kube-system
  hostnames:
    - "s3.homelab"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: garage
          port: 3900
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: garage-admin
  namespace: garage
spec:
  parentRefs:
    - name: homelab-gateway
      namespace: kube-system
  hostnames:
    - "garage.homelab"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: garage-webui
          port: 3909
---
apiVersion: gateway.networking.k8s.io/v1
kind: HTTPRoute
metadata:
  name: opencost
  namespace: opencost
spec:
  parentRefs:
    - name: homelab-gateway
      namespace: kube-system
  hostnames:
    - "opencost.homelab"
  rules:
    - matches:
        - path:
            type: PathPrefix
            value: /
      backendRefs:
        - name: opencost
          port: 9090
